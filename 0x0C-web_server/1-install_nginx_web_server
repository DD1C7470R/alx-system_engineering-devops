#!/usr/bin/env bash
#install an nginx server and serves hello world

#sudo apt-get update
#sudo apt-get install nginx
#sudo ufw allow 'Nginx HTTP'
#echo "Hello World!" > /var/www/index.html
#sudo sed -i "s@root /var/www/;@root "/var/www;@" "/etc/nginx/sites-available/default"
#PID=$('pgrep nginx')
#sudo kill -HUP $PID

# Update the package list and install NGINX
sudo apt-get update
sudo apt-get install -y nginx

# Allow HTTP traffic through the firewall
sudo ufw allow 'Nginx HTTP'

# Check if NGINX is running
if pgrep nginx &>/dev/null; then
    echo "NGINX is already running."
else
    echo "NGINX is not running. Starting NGINX..."
    sudo service nginx start
fi

# Check if NGINX is already configured
if grep -q "Hello World!" /var/www/html/index.html; then
    echo "NGINX is already configured to serve Hello World!"
else
    echo "Configuring NGINX to serve Hello World..."
    echo "Hello World!" | sudo tee /var/www/html/index.html > /dev/null
fi

